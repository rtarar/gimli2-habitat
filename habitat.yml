# Habitat Reference Definition
# This file defines metadata for the immutable habitat shell geometry

metadata:
  project: Gimli2 Habitat Interior Design
  version: 0.2.0
  created: 2025-01-19
  last_updated: 2025-01-19
  dimensions_verified: 2025-01-19

# Reference Geometry
reference:
  # Location of the immutable STEP file
  step_file: reference/Osterath_Habitat_1225 AF.step

  # Status - this file is NEVER modified directly
  status: immutable

  # Source of the geometry
  source:
    provider: Osterath  # Builder-supplied geometry
    received_date: 2025-01-19
    revision: "1225 AF"

  # Change control
  change_control:
    owner: human  # Only humans can authorize changes
    process: See GOVERNANCE.md for change control protocol
    last_change: 2025-01-19

# Coordinate System
coordinate_system:
  origin: builder_defined  # Origin as defined in STEP file
  units: millimeters
  up_axis: Z
  forward_axis: Y

  # Reference points (to be populated after STEP import)
  reference_points:
    floor_level: null
    ceiling_level: null
    entry_door_center: null

# Habitat Dimensions (measured from STEP file)
dimensions:
  interior_length: 4780  # mm
  interior_width: 2280   # mm
  interior_height: 2160  # mm
  floor_area: 10.90      # m² (4.78 x 2.28)
  volume: 23.54          # m³ (4.78 x 2.28 x 2.16)

# Defined Features
features:
  walls:
    - id: WALL-FRONT
      location: front
      length: 2280  # mm (width of habitat)
    - id: WALL-REAR
      location: rear
      length: 2280  # mm
      features: [WIN-01, WIN-02]  # Two RA-40 windows
    - id: WALL-DRIVER
      location: driver-side
      length: 4780  # mm (length of habitat)
      features: [DOOR-01, WIN-05]  # Entry door and kitchen window
    - id: WALL-PASSENGER
      location: passenger-side
      length: 4780  # mm
      features: [WIN-04]  # Bathroom window

  windows:
    - id: WIN-01
      model: RA-40
      location: rear-driver-side
      wall: WALL-REAR
      opening_width: 637   # mm visible
      opening_height: 1027  # mm visible
      cutout_width: 670    # mm
      cutout_height: 1063  # mm
    - id: WIN-02
      model: RA-40
      location: rear-passenger-side
      wall: WALL-REAR
      opening_width: 637   # mm visible
      opening_height: 1027  # mm visible
      cutout_width: 670    # mm
      cutout_height: 1063  # mm
    - id: WIN-03
      model: DR-20
      location: roof
      opening_width: 400   # mm visible
      opening_height: 650  # mm visible
      cutout_width: 554    # mm (verified from STEP file)
      cutout_height: 698   # mm (verified from STEP file)
      center_mm: [0, 2478, 3615]
    - id: WIN-04
      model: RA-30
      location: passenger-side
      wall: WALL-PASSENGER
      zone: bathroom
      opening_width: 537   # mm visible
      opening_height: 637  # mm visible
      cutout_width: 570    # mm
      cutout_height: 673   # mm
      notes: Horizontal orientation (673mm wide x 570mm tall)
    - id: WIN-05
      model: RA-40
      location: driver-side
      wall: WALL-DRIVER
      zone: kitchen
      opening_width: 637   # mm visible
      opening_height: 1027  # mm visible
      cutout_width: 670    # mm
      cutout_height: 1063  # mm
      notes: Horizontal orientation (1063mm wide x 670mm tall)

  doors:
    - id: DOOR-01
      model: DE-15
      location: driver-side
      wall: WALL-DRIVER
      opening_width: 700   # mm - standard RV entry door
      opening_height: 1800 # mm - full height entry
      cutout_width: 700    # mm
      cutout_height: 1800  # mm
      swing: outward
      hinge_side: right

  hatches:
    - id: HATCH-01
      model: LU-40
      location: garage-shell-driver-side
      wall: WALL-DRIVER
      cutout_width: 600    # mm
      cutout_height: 550   # mm
      notes: Driver side garage access hatch
    - id: HATCH-02
      model: LU-40
      location: garage-shell-passenger-side
      wall: WALL-PASSENGER
      cutout_width: 600    # mm
      cutout_height: 550   # mm
      notes: Passenger side garage access hatch

  mounting_surfaces: []
  fixed_elements: []

# Allowed Operations on Reference Geometry
allowed_operations:
  - read
  - measure
  - reference
  - derive_constraints
  - extract_surfaces_for_mounting
  - generate_keep_out_zones

# Forbidden Operations
forbidden_operations:
  - edit
  - regenerate
  - override
  - delete
  - modify_topology
  - add_features

# Constraints Derived from Habitat
constraints:
  # All interior elements must fit within these bounds
  interior_bounds:
    type: derived_from_step
    status: measured
    length: 4780  # mm
    width: 2280   # mm
    height: 2160  # mm

  # Clearance requirements
  clearances:
    floor_clearance_min: 0  # mm from floor
    ceiling_clearance_min: 50  # mm from ceiling
    wall_clearance_min: 10  # mm from walls

  # Door swing zones - keep clear
  door_swing_zones:
    status: pending_step_analysis

# Validation
validation:
  # How to validate designs against the habitat
  method: fusion360_interference_check

  # Required checks before any design is approved
  required_checks:
    - interference_with_shell: false
    - within_interior_bounds: true
    - clearances_respected: true
    - door_swings_clear: true

# Notes
notes:
  - This file is the authoritative metadata for the habitat reference
  - The STEP file itself is the geometric source of truth
  - Update this file after importing the STEP file
  - All measurements in millimeters unless otherwise specified
